$(document).ready(function(){var e=window.DIOT_UTILS.getQueryString("type"),t=window.DIOT_UTILS.getQueryString("txid");e&&t&&e>0&&t.length>0?loadTransaction(t):(jQuery("#txtBlockInfo").on("focus",function(){jQuery("#labSearchHint").css("opacity",0)}).on("blur",function(){(!this.value||this.value.length<=0)&&jQuery("#labSearchHint").css("opacity",1)}),jQuery("#btnSearch").on("click",function(){var e=jQuery("#txtBlockInfo").val();!e||e.length<=0?alert(window.DIOT_I18N["Please enter search information"]):window.DIOT_WALLET_API.exploreranalysis(e,function(t){if(t&&t.result&&t.result>0)if(1===t.result||"1"===t.result);else{if(2===t.result||"2"===t.result)return loadBlockInfoByHeight(e);if(3===t.result||"3"===t.result)return loadBlockInfoByHash(e);if(4===t.result||"4"===t.result)return loadTransaction(e)}})}),window.DIOT_WALLET_API.getLatestBlocks(10,function(e){if(e&&e.result&&e.result.length>0){jQuery("#listBlockchain ul[class!='list-header']").remove();for(var t=jQuery("#listBlockchain"),r=0;r<e.result.length;r++){var i=e.result[r].time;i&&(i=(i=parseInt((new Date).getTime()/1e3)-i)>=86400?parseInt(i/86400)+window.DIOT_I18N["Day(s)"]:i>=3600?parseInt(i/3600)+window.DIOT_I18N["Hour(s)"]:i>=60?parseInt(i/60)+window.DIOT_I18N["Minute(s)"]:"1"+window.DIOT_I18N["Minute(s)"]),t.append('<ul><li><a href="">'+e.result[r].height+"</a></li><li>"+i+"</li><li>"+(e.result[r].tx?e.result[r].tx.length:0)+"</li><li>"+e.result[r].size+"</li><li>"+e.result[r].difficulty+"</li></ul>")}}jQuery("#btnLastBlock").on("click",function(){var e=jQuery("#txtBlockInfo").val();isNaN(e)||loadBlockInfoByHeight(--e)}),jQuery("#btnNextBlock").on("click",function(){var e=jQuery("#txtBlockInfo").val();isNaN(e)||loadBlockInfoByHeight(++e)}),jQuery("#listBlockchain ul li a").on("click",function(){return loadBlockInfoByHeight(this.innerText),!1})}))});var loadBlockInfoByHeight=function(e){window.DIOT_WALLET_API.getBlockByNumber(e,function(e){if(e&&e.result){jQuery("#labSearchHint").hide(),jQuery("#txtBlockInfo").val(e.result.height),jQuery("#spnBlockHeight").text(e.result.height),jQuery("#spnBlockHash").text(e.result.hash),jQuery("#spnConfirmations").text(e.result.confirmations),jQuery("#spnTime").text(window.DIOT_UTILS.getDateFormat(e.result.time,"yyyy-MM-dd HH:mm")),jQuery("#spnSize").text(e.result.size),jQuery("#spnNonce").text(e.result.nonce),jQuery("#spnVersion").text(e.result.version),jQuery("#spnDifficulty").text(e.result.difficulty),jQuery("#latestList li").remove();var t=e.result.tx;if(t&&t.length>0)for(var r=jQuery("#latestList"),i=0;i<t.length;i++)r.append("<li><a href='javascript:void(0)' onclick='return loadTransaction(this.innerText)'>"+t[i]+"</a></li>");jQuery("#listBlockchain").hide(),jQuery("#blockchainDetail").show(),jQuery("#tradeInformation").hide()}})},loadBlockInfoByHash=function(e){window.DIOT_WALLET_API.getBlock(e,function(e){if(e&&e.result){jQuery("#labSearchHint").hide(),jQuery("#txtBlockInfo").val(e.result.hash),jQuery("#spnBlockHeight").text(e.result.height),jQuery("#spnBlockHash").text(e.result.hash),jQuery("#spnConfirmations").text(e.result.confirmations),jQuery("#spnTime").text(window.DIOT_UTILS.getDateFormat(e.result.time,"yyyy-MM-dd HH:mm")),jQuery("#spnSize").text(e.result.size),jQuery("#spnNonce").text(e.result.nonce),jQuery("#spnVersion").text(e.result.version),jQuery("#spnDifficulty").text(e.result.difficulty),jQuery("#latestList li").remove();var t=e.result.tx;if(t&&t.length>0)for(var r=jQuery("#latestList"),i=0;i<t.length;i++)r.append("<li><a href='javascript:void(0)' onclick='return loadTransaction(this.innerText)'>"+t[i]+"</a></li>");jQuery("#listBlockchain").hide(),jQuery("#blockchainDetail").show(),jQuery("#tradeInformation").hide()}})},loadTransaction=function(e){return window.DIOT_WALLET_API.getTransaction(e,function(e){if(e&&e.result){if(jQuery("#labSearchHint").hide(),jQuery("#txtBlockInfo").val(e.result.txid),jQuery("#spnTradeTx").text(e.result.txid),jQuery("#spnTradeVersion").text(e.result.version),jQuery("#spnTradeTime").text(window.DIOT_UTILS.getDateFormat(e.result.time,"yyyy-MM-dd HH:mm")),jQuery("#tradeDateilVin ul").remove(),e.result.vin&&e.result.vin.length>0&&e.result.vin[0].txid)for(var t=e.result.vin,r=0;r<t.length;r++)jQuery("#tradeDateilVin").append('<ul class="flex-center"><li>'+r+'</li><li class="center">'+t[r].txid+"</li><li>"+t[r].vout+"</li></ul>");if(jQuery("#tradeDateilVout ul").remove(),e.result.vout&&e.result.vout.length>0&&e.result.vout[0].scriptPubKey)for(var i=e.result.vout,r=0;r<i.length;r++)i[r].scriptPubKey.addresses&&i[r].scriptPubKey.addresses.length>0&&jQuery("#tradeDateilVout").append('<ul class="flex-center"><li>'+i[r].n+'</li><li class="center">'+i[r].scriptPubKey.addresses[0]+"</li><li>"+i[r].value+"</li></ul>");jQuery("#listBlockchain").hide(),jQuery("#blockchainDetail").hide(),jQuery("#tradeInformation").show()}}),!1};