$(document).ready(function(){function i(){window.DIOT_WALLET_API.getInfo(function(o){var a=o.result;if(a.syncing){if($("#dialogShade").length>0)return;var d='<div id="dialogBody" class="dialog-body"><i id="dialogClose" class="dialog-close"></i><div class="dialog-flex dialog-title"><span class="dialog-double"></span><span class="title">'+window.DIOT_I18N.Tips+'</span><span class="dialog-double"></span></div><div class="dialog-flex dialog-column"><div class="dialog-relative dialog-flex"><span class="dialog-wallet-syncing"></span></div><div class="dialog-tips dialog-flex"><i class="dialog-triangle"></i><span>'+window.DIOT_I18N["The wallet is now in sync and can be enabled until after the synchronization is complete"]+"</span></div></div></div>";$("body").append('<div id="dialogShade" class="dialog-shade"></div>').append(d);var n=$("#dialogShade"),e=$("#dialogBody"),s=$("#dialogClose"),l=$("#dialogBtn"),t=$(window),c=e.outerWidth(),r=e.outerHeight(),g=t.width(),w=(t.height()-r)/2,u=(g-c)/2;return e.css({top:w,left:u}),setTimeout(function(){e.css({opacity:1}),n.css({opacity:.1})},100),s.click(function(){e.css({opacity:0}),n.css({opacity:0}),setTimeout(function(){n.remove(),e.remove()},200)}),l.click(function(){window.location.reload(!0)}),void t.resize(function(){var i=$("#dialogBody"),o=$(window),a=i.outerWidth(),d=i.outerHeight(),n=o.width(),e=(o.height()-d)/2,s=(n-a)/2;i.css({top:e,left:s})})}$("#chain-version").html(window.DIOT_WALLET_CONFIG.version),$("#chain-connections").html(a.connections),$("#chain-blocks").html(a.blocks+"("+window.DIOT_UTILS.getDateFormat(a.lastblocktime,"yyyy-MM-dd HH:mm")+")"),$("#chain-balance").html(a.balance),window.setTimeout(i,1e4)})}function o(){window.DIOT_WALLET_API.getAccountAddress(function(i){var o=i.result[0];$("#chain-address").html(o),a(o)})}function a(i){navigator.userAgent.indexOf("MSIE")>0?$("#qrcode").html("").qrcode({text:i,width:"99",height:"99",render:"table"}):$("#qrcode").html("").qrcode({text:i,width:"99",height:"99"})}function d(){window.DIOT_WALLET_API.getEncryptStatus(function(i){var o=i.result;1===parseInt(o)&&(e=!0)})}function n(){var i='<div id="dialogBody" class="dialog-body"><i id="dialogClose" class="dialog-close"></i><div class="dialog-flex dialog-title"><span class="dialog-double"></span><span class="title">'+window.DIOT_I18N["Send Available"]+'</span><span class="dialog-double"></span></div><div class="dialog-flex dialog-column"><div class="dialog-tips dialog-flex"><i class="dialog-triangle"></i><span>'+window.DIOT_I18N["Please ensure that you are send to a correct address. This operation cannot be cancelled"]+'</span></div><div class="dialog-relative"><span class="dialog-lable">'+window.DIOT_I18N["Pay To"]+'</span><input class="dialog-input" id="sendAddress" placeholder="'+window.DIOT_I18N["Please enter destination address"]+'"/></div><div class="dialog-relative"><span class="dialog-lable">'+window.DIOT_I18N.Amount+'</span><input  class="dialog-input" id="sendAmount" placeholder="'+window.DIOT_I18N["Please enter amount"]+'"/></div><div class="dialog-relative '+(e?"":"dialog-hide")+'"><span class="dialog-lable">'+window.DIOT_I18N.Password+'</span><input type="password"  class="dialog-input" id="sendPass" placeholder="'+window.DIOT_I18N["Please enter passworld"]+'"/></div><div class="dialog-relative"><button id="dialogBtn" class="dialog-btn">'+window.DIOT_I18N.Send+"</button></div></div></div>";$("body").append('<div id="dialogShade" class="dialog-shade"></div>').append(i);var o=$("#dialogShade"),a=$("#dialogBody"),d=$("#dialogClose"),n=$("#dialogBtn"),s=$("#sendAmount"),l=$(window),t=a.outerWidth(),c=a.outerHeight(),r=l.width(),g=(l.height()-c)/2,w=(r-t)/2;a.css({top:g,left:w}),setTimeout(function(){a.css({opacity:1}),o.css({opacity:.1})},100),d.click(function(){a.css({opacity:0}),o.css({opacity:0}),setTimeout(function(){o.remove(),a.remove()},200)}),n.click(function(){var i=window.DIOT_UTILS.trim($("#sendAddress").val()),o=window.DIOT_UTILS.trim($("#sendAmount").val()),a=window.DIOT_UTILS.trim($("#sendPass").val());""!==i?""===a&&e?alert(window.DIOT_I18N["Please enter passworld"]):""!==o&&window.DIOT_UTILS.checkNumber(o)?window.DIOT_WALLET_API.sendToAddress(i,o,a,e,function(i){""!==i.result&&(window.location.href="./list-transactions.html")}):alert(window.DIOT_I18N["Please enter amount"]):alert(window.DIOT_I18N["Please enter destination address"])}),s.on("keypress",function(i){return window.DIOT_UTILS.goIngKeypress(this,i,4)}),l.resize(function(){var i=$("#dialogBody"),o=$(window),a=i.outerWidth(),d=i.outerHeight(),n=o.width(),e=(o.height()-d)/2,s=(n-a)/2;i.css({top:e,left:s})})}var e=!1;jQuery("#btnLogout").on("click",function(){window.DIOT_WALLET_API.frontendLogin(0,function(i){1!==i.result&&"1"!==i.result||(window.location.href="./login.html")})}),$("#sendToAddress").click(function(){n()}),window.DIOT_WALLET_API.frontendLogin(null,function(a){var n=a.result;0===parseInt(n)?window.location.href="./login.html":(i(),o(),d())})});